<!DOCTYPE html>
<html lang="en" data-bs-theme="auto" >
  <head>
   
    <script src="../js/color-modes.js"></script>
   
    <link
      rel="stylesheet"
      href="../bootstrap-icons-1.10.5/font/bootstrap-icons.min.css"
    />
    <link rel="shortcut icon" href="../img/ali.png" type="image/x-icon">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta
      name="author"
      content="Mark Otto, Jacob Thornton, and Bootstrap contributors"
    />
    <meta name="generator" content="Hugo 0.112.5" />
    <title>Home page</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet" />
    <!-- استايل الي يغمق ويفتح الشاشة -->
    <link rel="stylesheet" href="../css/dark-light.css"/>
   

    <!-- Custom styles for this template -->
    <link href="../css/sidebars.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/myStyle.css" />

  </head>
  <body>
    <!--ايقونات  -->
    <%- include('../components/dark-light.ejs') %> 


    <main class="d-flex flex-nowrap">
      <!-- الواجهه الي على اليمين -->
      <%- include('../components/sidebar.ejs', {currentPage:"review"}) %> <!--ونحط عليها شرط هناك اذا من الندس حط الطلمة لون ازر واذا ماهو من الاندكس لا تحط شي طبعا استقبلناها هناك تقدر تشوفها sidebar.ejs طبعا الي بعد الفاصله ميزه من الاي جي اس عشان نرسل كي وفاليو لصفحة -->

      <section class="w-100">
      <%- include('../components/navbar.ejs') %>


      <ul class="nav nav-tabs ">
        <li class="nav-item">
          <a  class="nav-link active" aria-current="page" >ورقة قياس</a>
        </li>
      
        <li class="nav-item">
          <a href="../total-meters/<%= arrR._id %>" class="nav-link text-secondary-emphasis " aria-current="page"  >مجموع الأمتار</a>
        </li>
        <li class="nav-item">
          <a href="../price/<%= arrR._id %>"class="nav-link text-secondary-emphasis"  href="#">التسعيرة</a>
        </li>
        <li class="nav-item">
          <a href="../total-materials/<%= arrR._id %> "class="nav-link text-secondary-emphasis" aria-disabled="true">كميات المواد</a>
        </li>
        <li class="nav-item">
          <a href="../glass-cutting/<%= arrR._id %> "class="nav-link text-secondary-emphasis" aria-disabled="true">تقرير قص الزجاج </a>
        </li>


        <li class="nav-item">
          <a href="../report-temper/<%= arrR._id %>" class="nav-link text-secondary-emphasis" aria-disabled="true">تقرير السكريت   </a>
        </li>

   
        <li class="nav-item">
          <a  href="../aluminum-cutting/<%= arrR._id %>" class="nav-link text-secondary-emphasis"  aria-disabled="true">تقرير قص الألمنيوم </a>
        </li>

      </ul>


     <!-- form-control -->
   
     <h6>id Customer:<%= idCustomer %></h6>
     <div  class="grid gap-0 column-gap-3 col align-self-end " style=" direction: rtl; margin: 16px;">
      <button <%=arrR.orderNumber?"hidden":'' %> type="button" class="btn btn-danger ">حذف <i class="bi bi-trash"></i></button>

     <a <%=arrR.orderNumber?"hidden":'' %> href="../view/<%=idCustomer %>" type="button" class="btn btn-secondary">البقاء في المسودة<i class="bi bi-journal-text"></i></a>

      <a <%=arrR.orderNumber?'':"hidden" %> href="../view/<%=idCustomer %>" type="button" class="btn btn-secondary">العودة إلى صفحة العميل <i class="bi bi-arrow-left"></i></a>


      <form   action="/review/<%=arrR._id %>" method="post"  class="grid gap-0 column-gap-3 col align-self-end " style=" direction: rtl; margin: 16px;">
       
          <input
          name="confirming"
           value="<%="مؤكد" %>"
            type="hidden"
            class="form-control"
           
          />
          <input
          name="id"
           value="<%= arrR._id %>"
            type="hidden"
            class="form-control"
           
          />

          <input
          name="idCustomer"
           value="<%= idCustomer %>"
            type="hidden"
            class="form-control"
           
          />

          <!-- <input type="submit" value="اعتماد الطلب" class="btn btn-success"> <i class="bi bi-check2"></i></input> -->
          <%=//idCustomer?"hidden":"submit" %>
      <input type="<%=arrR.orderNumber?"hidden":"submit" %>" value="اعتماد الطلب" class="btn btn-success">
     </form>


  </div>



        <table
          style="width: 99%"
          class="text-center mx-auto table mt-5 table-striped table-bordered"
        >
        <!-- هذا الشرط عشان اذا طول الاري حقة الداتا فاضية يطبع لات توجد بينات -->
        <% //if (arr.length ==0) { %>
     
         <!-- <h1 style="text-align: center; margin-top: 4rem;">لا توجد بيانات</h1> -->
        <% //} %>

        <!-- هذا الشرط عشان يعرض الصف العلوي من الجدول اذا فيه بينات في قاعدة البينات -->
        <% //if (arr.length > 0) { %>
          







        
   
            <a
           
            class="btn btn-primary "
            href="../measurement/<%= arrR._id %>"
             type="button"
              class="btn btn-primary">إضافة قياس جديد<i class="bi bi-plus-lg"></i></a>


              <%// arrR.measurement.reverse().forEach((item, index) => { %> 
              <% //if (arrR.length ==0) { %> 
                <!-- <h1 style="text-align: center; margin-top: 4rem;">لا توجد بيانات</h1> -->
               <% //} %>
       
               <!-- هذا الشرط عشان يعرض الصف العلوي من الجدول اذا فيه بينات في قاعدة البينات -->
               <% //if (arrR.length > 0) { %>

                

          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">height</th>
              <th scope="col">width</th>
              <th scope="col">fixed</th>
              <th scope="col">Aluminum code</th>
              <th scope="col">Aluminum color code</th>
              <th scope="col">Glass color code</th>
              <th scope="col">Temper</th>
              <th scope="col">Lip</th>
              <th scope="col">Design code</th>
              <th scope="col">Thickness</th>
              <th scope="col">Comments</th>
              <th scope="col">داخلي/خارجي</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
        <% //} %>
        <%// }) %>
        <!--  -->
        <tbody id="kk">
     <!-- المحتوى الذي هنا نقلناه في الاسفل في الجافا سكربت  -->
             
      
          </tbody>
        </table>





     


      </section>
    </main>
    <script src="../js/bootstrap.bundle.min.js"></script>

    <script src="../js/sidebars.js"></script>

    <script src="../js/main.js"></script>
   
  </body>

  <script>
    // هذا عشان ناخذ الأيدي من الرابط لأننا نحتاج نحط ايديين في الرابط 
        // الحصول على جزء العنوان URL المتعلق بالمسار
    const path = window.location.pathname;
    // تقسيم المسار بواسطة '/' للحصول على مكوناته
    const parts = path.split('/');
    // الحصول على الجزء المرتبط بالـ ID
    const id = parts[parts.length - 1];
    // يمكنك الآن استخدام قيمة الـ ID بالشكل الذي تحتاجه في تطبيقك
    // console.log("ID:", id);
// document.getElementById("gg").action=`/review/<%=// item._id %>-${id}?_method=DELETE`
// الحصول على عنصر النموذج باستخدام الـ ID
const form = document.getElementById("gg");
  // تغيير القيمة لخاصية action
  // form.action = `/review/<%=//item._id %>66-${id}?_method=DELETE`;

  document.getElementById("kk").innerHTML=
  
  `
  <% arrR.measurement.forEach((item, index) => { %>                <!-- طريقة ثانية للفور لوب تكتب اسم الأري الي انشأنها مع القت ركوس الي في صفحة الاب و ارسلنها باسم الأري وكتبتها مثل ماتشوف والمتغير محمل بقاعرة البينات كاملة وكلمة الايتم انا كتبهتها كمتغير للوبز ولو ماكتبنا الاستدعأت الي تحت راح يكرر الي ي في الوب عدد المعلومات الي في الداتا كلها -->

<!--  -->
   <tr>
     <th scope="row"><%= index +1 %></th>  <!-- الاندس هذا اضافه من اللوبز وكتبناه عشان يرقم الجداول الترقم يبد من صفر عشان كذا كتبنا زايد واحد-->
     <td><%=item.W  %>	<%= //item.lastNamecustomer %></td>  <!-- نكتب متغير الوبز وبعد نتكتب السم الي في الداتا عشان يطبعة -->
     <td><%= item.H %>	</td>
     <td><%=// item.branch %></td>
     <td><%= item.aluminumCode %></td>
     <td><%=item.aluminumColorCode// moment(item.updatedAt).fromNow();  %></td> <!-- الاكواد هذي من متبة لتعديل شكل التاريخ من الداتا بواسطة المانقوز  -->
     <td><%= item.glassColorCode %>	<%= //item.lastNamecustomer %></td>  <!-- نكتب متغير الوبز وبعد نتكتب السم الي في الداتا عشان يطبعة -->
     <td><%= item.temper %>	</td>
     <td><%= item.lip %>	</td>
     <td><%= //item.designCode %>
      <!-- <form class="row g-3"> -->
        <div class="container">
      <div  id="div110" class="row" role="group" aria-label="Basic radio toggle button group">
        <div class="col-md-6 mx- d-block text-center">
        <label class="checkbox-wrapper">
            <span class="checkbox-tile">
                <span class="checkbox-icon">
                    <img class=" img-fluid" src="/img/windows/case7-white.png" alt="" >
                    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" fill="currentColor" viewBox="0 0 256 256"> -->
                        <rect width="256" height="256" fill="none"></rect>
                        <polygon points="56 100 56 168 128 236 128 168 200 168 56 32 200 32 200 100 56 100" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="12"></polygon>
                    </svg>
                </span>
                <span class="checkbox-label"><%= item.designCode %></span>
            </span>
        </label>
      </div>
    </div>
  </div>
    </td>
     <td><%= item.aluminumThickness %></td>
     
     <td><%=  item.comments  // moment(item.updatedAt).fromNow();  %></td> <!-- الاكواد هذي من متبة لتعديل شكل التاريخ من الداتا بواسطة المانقوز  -->
     <td><%= item.insideOrOutside %></td>
     <td>
       <!-- تحت في الرابط حطينا الأي دي الي  يطبعة الداتا عشان اذا ضغطنا اشتعراض للعميل يكتب رقم الايدي في الرابط -->
    

       <a
         data-bs-toggle="tooltip"
         data-bs-title="Edit user"
         data-bs-placement="top"
         class="btn btn-primary btn-sm mx-auto"
         href="../measurement/<%= item._id %>"
       >
         <i class="bi bi-pencil"></i>
       </a>
      
       <form id="gg" style="display: inline;" action = "/review/<%=item._id %>-${id}?_method=DELETE"; method="post">
       <button
         data-bs-toggle="tooltip"
         data-bs-title="Delete user"
         data-bs-placement="top"
         class="btn btn-danger btn-sm mt-2"
       >
         <i class="bi bi-trash"></i>
       </button>
     </form>
     </td>
   </tr>
   
   <% }) %>
  `


      </script>
 
</html>
